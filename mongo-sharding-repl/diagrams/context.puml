@startuml C4_Context
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_WITH_LEGEND()

title Контекстная диаграмма MongoDB Sharding с репликацией

Person(user, "Пользователь", "Пользователь системы")

System(mongo_system, "MongoDB Sharding System", "Система MongoDB с шардированием и репликацией")

System_Ext(mongos, "MongoDB Router", "MongoDB Router (mongos) для маршрутизации запросов")
System_Ext(configsvr, "Config Server", "Config Server для хранения метаданных")
System_Ext(shard1, "Shard1", "Первый шард с репликацией")
System_Ext(shard2, "Shard2", "Второй шард с репликацией")
System_Ext(api, "API Application", "FastAPI приложение для работы с данными")

Rel(user, api, "HTTP/HTTPS")
Rel(api, mongos, "MongoDB Protocol")
Rel(mongos, configsvr, "MongoDB Protocol")
Rel(mongos, shard1, "MongoDB Protocol")
Rel(mongos, shard2, "MongoDB Protocol")

@enduml 